{% extends 'base.html' %}

{% block title %}EvoPIE{% endblock %}

{% block head%}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.css">  
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"></script>
<script>
    $(document).ready( function () {
        $('#gradingtable').DataTable();
    } );
</script>
{% endblock %}

{% block content %}
<div class="jumbotron jumbotron-fluid">
    <div class="container">
        <h1 class="display-4">Questions Browser</h1>
            <p class="lead">
                Use this to find questions that are of interest to you. 
                Take note of their question ID so that you may then integrate
                them into your quizzes or contribute new distractors to them.
            </p>
    </div>
</div>

    

<div class="card bg-light m-3 mx-auto" style="width: 75%">
    <div class="card-body" bg-light>
        <h5 class="card-title" data-toggle = "collapse" data-target = "#newquestion">Create New Question</h5>
        <div id = "newquestion" class = "collapse">
            <p class="card-text">
                <form id="questionForm" method="post" action='/questions'>
                    <div class="form-group">
                        <label for="title">Title</label>
                        <input name="title" id="title" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="stem">Question</label>
                        <textarea class="summernote form-control" name="stem" id="question" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="answer">Answer</label>
                        <textarea class="summernote form-control" name="answer" id="answer" required></textarea>
                    </div>
                    <input type="submit" value="Submit" class="btn btn-primary">
                </form>            
            </p>
        </div>
    </div>
</div>


<!div class="card-deck">    
    <div class="card bg-light m-3 mx-auto" style="width: 75%">
        <div class="card-body" bg-light>
    
            <table class='compact stripe' width='100%' id="gradingtable">
                <thead><tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Edit</th>
                    <th>Delete</th>
                </tr></thead>
                <tbody>
                {% for single_question in all_questions %}
                    <tr>
                        <td>
                            {{ single_question.id }}
                        </td>
                        <td>
                            <p data-toggle = "modal" data-target = "#q{{single_question.id}}">
                                {{ single_question.title }}
                            </p>
                            <div class="modal fade" id="q{{single_question.id}}" tabindex="-1" role="dialog"
                                aria-labelledby="mySmallModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-sm">
                                    <div class="modal-content">
                                        <table style="border: 0; width: 100%;" cellpadding="10">
                                            <tr>
                                                <td style="vertical-align: top"><b>Q:</b></td>
                                                <td>
                                                        {{ single_question.stem | safe }}
                                                </td>
                                            </tr>
                                            <tr>   
                                                <td style="vertical-align: top"><b>A:</b></td>
                                                <td>{{ single_question.answer | safe }}</td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>                    
                        </td>
                        <td>
                            <a class="btn btn-primary my-2" href="/question-editor/{{ single_question.id }}">Edit Question</a>
                        </td>
                        <td></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
<!/div>
{% endblock %}
